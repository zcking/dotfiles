#!/usr/bin/env zsh

{{ $sdkman := joinPath .chezmoi.homeDir ".sdkman" }}
{{ if (stat $sdkman) -}}
source {{ joinPath $sdkman "bin" "sdkman-init.sh" }}

# Description: Install any tools managed by SDKMAN (e.g. Java, Scala, etc.)
# Install Java 17.0.13-zulu if not already installed
if [[ ! -d "$SDKMAN_DIR/candidates/java/17.0.13-zulu" ]]; then
    echo "Installing Java 17.0.13-zulu..."
    sdk install java 17.0.13-zulu
else
    echo "Java 17.0.13-zulu is already installed"
fi

# Install Scala 2.12.17 if not already installed
if [[ ! -d "$SDKMAN_DIR/candidates/scala/2.12.17" ]]; then
    echo "Installing Scala 2.12.17..."
    sdk install scala 2.12.17
else
    echo "Scala 2.12.17 is already installed"
fi

# TODO: Set default versions
# sdk default java 17.0.13-zulu
# sdk default scala 2.12.17
{{- else }}
echo "WARNING: SDKMAN directory not found. Please install SDKMAN first."
{{- end }}
